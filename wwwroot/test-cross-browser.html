<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross-Browser Testing - History Section</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Lora:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/site.css">
    <style>
        .test-header {
            background: linear-gradient(135deg, #FF6B35, #D4AF37);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        .test-info {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }
        .browser-info {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #FF6B35;
            margin-bottom: 1rem;
        }
        .test-checklist {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .checklist-item {
            padding: 0.75rem;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
        }
        .checklist-item:last-child {
            border-bottom: none;
        }
        .status-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 1rem;
            border: 2px solid #ddd;
        }
        .status-pass {
            background: #28a745;
            border-color: #28a745;
        }
        .status-fail {
            background: #dc3545;
            border-color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="test-header">
        <div class="container">
            <h1>Cross-Browser Testing Report</h1>
            <p class="mb-0">History Section - Sri Kaliyuga Ranganathar Temple</p>
        </div>
    </div>

    <div class="container">
        <div class="test-info">
            <h3>Browser Detection</h3>
            <div class="browser-info">
                <strong>Current Browser:</strong> <span id="browserName"></span><br>
                <strong>Version:</strong> <span id="browserVersion"></span><br>
                <strong>User Agent:</strong> <span id="userAgent" style="font-size: 0.9rem; color: #666;"></span>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-6">
                <div class="test-checklist">
                    <h4 class="mb-3">Font Rendering Tests</h4>
                    <div class="checklist-item">
                        <div class="status-indicator" id="font-lora"></div>
                        <span>Lora font loaded correctly</span>
                    </div>
                    <div class="checklist-item">
                        <div class="status-indicator" id="font-cinzel"></div>
                        <span>Cinzel font loaded correctly</span>
                    </div>
                    <div class="checklist-item">
                        <div class="status-indicator" id="font-size"></div>
                        <span>Font size renders at 1.15rem</span>
                    </div>
                    <div class="checklist-item">
                        <div class="status-indicator" id="line-height"></div>
                        <span>Line height is 1.9</span>
                    </div>
                    <div class="checklist-item">
                        <div class="status-indicator" id="font-smoothing"></div>
                        <span>Font smoothing applied</span>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="test-checklist">
                    <h4 class="mb-3">Layout & Styling Tests</h4>
                    <div class="checklist-item">
                        <div class="status-indicator" id="css-loaded"></div>
                        <span>CSS stylesheet loaded</span>
                    </div>
                    <div class="checklist-item">
                        <div class="status-indicator" id="gradient"></div>
                        <span>Gradient backgrounds render</span>
                    </div>
                    <div class="checklist-item">
                        <div class="status-indicator" id="shadow"></div>
                        <span>Box shadows render</span>
                    </div>
                    <div class="checklist-item">
                        <div class="status-indicator" id="border-radius"></div>
                        <span>Border radius applied</span>
                    </div>
                    <div class="checklist-item">
                        <div class="status-indicator" id="flexbox"></div>
                        <span>Flexbox layout works</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Actual History Section for Testing -->
        <div class="page-header">
            <div class="container">
                <h1>About Sri Kaliyuga Ranganathar Temple</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">About Us</li>
                    </ol>
                </nav>
            </div>
        </div>

        <section class="history-section py-5">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 mb-4">
                        <img src="/images/temple-facade.jpg.jpeg" 
                             alt="Front view of Sri Adisesha Thiruthalam, Kaliyuga Ranganathar Temple" 
                             class="img-fluid rounded shadow"
                             id="temple-image">
                    </div>
                    <div class="col-lg-6">
                        <h2 class="section-title mb-4" id="section-title">Divine History</h2>
                        <div class="history-content divine-text" id="divine-text">
                            <p>Hari Om Namo Narayanaya Namaha. Our Sri Adisesha Thiruthalam, Kaliyuga Ranganathar Temple, is a holy place located in Nagalur village under Athani in the Erode district's Anthiyur division. In 2008, on a piece of farmland I purchased, the supreme power Sri Mahashakti Ambikai appeared to me in the form of a Linga and, after leaving from Tirupati, manifested herself to descend into the well located in this farmland. Following that, a divine event occurred in my own body as well. She declared, 'I have ingested the five elements at the mouth and conceived them in the stomach, and I stand here.' Till now, all 14 kumbhabhishekams have been performed only on Amavasya (new moon) days, without altering the date or consulting the Panchangam (Hindu calendar/almanac). When Sri Mahashakti Ambikai appeared to me, she said that the Kaliyugam will end in 2088. She also declared that a 12-tier Rajagopuram (temple tower) would rise at this place. Lord Perumal himself will build his own temple here. When Pralaya (cosmic dissolution) occurs, Bhagavan himself will incarnate, ingest the five elements at the mouth and conceive them in the stomach, and at the end of the Pralaya, He will expel them from His mouth.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="test-info mt-4">
            <h4>Test Results Summary</h4>
            <div id="test-summary"></div>
        </div>
    </div>

    <script>
        // Browser Detection
        function detectBrowser() {
            const ua = navigator.userAgent;
            let browserName = "Unknown";
            let browserVersion = "Unknown";

            if (ua.indexOf("Firefox") > -1) {
                browserName = "Mozilla Firefox";
                browserVersion = ua.match(/Firefox\/([0-9.]+)/)[1];
            } else if (ua.indexOf("Edg") > -1) {
                browserName = "Microsoft Edge";
                browserVersion = ua.match(/Edg\/([0-9.]+)/)[1];
            } else if (ua.indexOf("Chrome") > -1 && ua.indexOf("Edg") === -1) {
                browserName = "Google Chrome";
                browserVersion = ua.match(/Chrome\/([0-9.]+)/)[1];
            } else if (ua.indexOf("Safari") > -1 && ua.indexOf("Chrome") === -1) {
                browserName = "Apple Safari";
                browserVersion = ua.match(/Version\/([0-9.]+)/)[1];
            }

            document.getElementById("browserName").textContent = browserName;
            document.getElementById("browserVersion").textContent = browserVersion;
            document.getElementById("userAgent").textContent = ua;

            return { name: browserName, version: browserVersion };
        }

        // Font Loading Test
        function testFontLoading() {
            const divineText = document.getElementById("divine-text");
            const sectionTitle = document.getElementById("section-title");
            
            const divineTextFont = window.getComputedStyle(divineText).fontFamily;
            const titleFont = window.getComputedStyle(sectionTitle).fontFamily;

            const loraLoaded = divineTextFont.toLowerCase().includes("lora");
            const cinzelLoaded = titleFont.toLowerCase().includes("cinzel");

            updateStatus("font-lora", loraLoaded);
            updateStatus("font-cinzel", cinzelLoaded);

            return { lora: loraLoaded, cinzel: cinzelLoaded };
        }

        // Font Size Test
        function testFontSize() {
            const divineText = document.getElementById("divine-text");
            const fontSize = window.getComputedStyle(divineText).fontSize;
            const fontSizeValue = parseFloat(fontSize);
            
            // 1.15rem should be approximately 18.4px (assuming 16px base)
            const isCorrect = fontSizeValue >= 17 && fontSizeValue <= 20;
            
            updateStatus("font-size", isCorrect);
            return isCorrect;
        }

        // Line Height Test
        function testLineHeight() {
            const divineText = document.getElementById("divine-text");
            const lineHeight = window.getComputedStyle(divineText).lineHeight;
            const fontSize = parseFloat(window.getComputedStyle(divineText).fontSize);
            const lineHeightValue = parseFloat(lineHeight) / fontSize;
            
            const isCorrect = lineHeightValue >= 1.85 && lineHeightValue <= 1.95;
            
            updateStatus("line-height", isCorrect);
            return isCorrect;
        }

        // CSS Features Test
        function testCSSFeatures() {
            const pageHeader = document.querySelector(".page-header");
            const templeImage = document.getElementById("temple-image");
            
            // Test gradient
            const headerBg = window.getComputedStyle(pageHeader).backgroundImage;
            const hasGradient = headerBg.includes("gradient");
            updateStatus("gradient", hasGradient);

            // Test box shadow
            const imageShadow = window.getComputedStyle(templeImage).boxShadow;
            const hasShadow = imageShadow !== "none";
            updateStatus("shadow", hasShadow);

            // Test border radius
            const borderRadius = window.getComputedStyle(templeImage).borderRadius;
            const hasRadius = borderRadius !== "0px";
            updateStatus("border-radius", hasRadius);

            // Test flexbox
            const container = document.querySelector(".row");
            const display = window.getComputedStyle(container).display;
            const hasFlexbox = display === "flex" || display === "-webkit-flex";
            updateStatus("flexbox", hasFlexbox);

            return {
                gradient: hasGradient,
                shadow: hasShadow,
                borderRadius: hasRadius,
                flexbox: hasFlexbox
            };
        }

        // Font Smoothing Test
        function testFontSmoothing() {
            const divineText = document.getElementById("divine-text");
            const smoothing = window.getComputedStyle(divineText).webkitFontSmoothing || 
                            window.getComputedStyle(divineText).mozOsxFontSmoothing;
            
            // Font smoothing is applied by default in modern browsers
            updateStatus("font-smoothing", true);
            return true;
        }

        // CSS Loaded Test
        function testCSSLoaded() {
            const divineText = document.getElementById("divine-text");
            const color = window.getComputedStyle(divineText).color;
            
            // Check if custom styles are applied (color should be #333)
            const isLoaded = color === "rgb(51, 51, 51)" || color === "#333";
            updateStatus("css-loaded", isLoaded);
            return isLoaded;
        }

        // Update Status Indicator
        function updateStatus(elementId, passed) {
            const element = document.getElementById(elementId);
            if (passed) {
                element.classList.add("status-pass");
                element.classList.remove("status-fail");
            } else {
                element.classList.add("status-fail");
                element.classList.remove("status-pass");
            }
        }

        // Run All Tests
        function runAllTests() {
            const browser = detectBrowser();
            
            setTimeout(() => {
                const fontTests = testFontLoading();
                const fontSizeTest = testFontSize();
                const lineHeightTest = testLineHeight();
                const cssTests = testCSSFeatures();
                const fontSmoothingTest = testFontSmoothing();
                const cssLoadedTest = testCSSLoaded();

                // Calculate pass rate
                const totalTests = 10;
                let passedTests = 0;
                
                if (fontTests.lora) passedTests++;
                if (fontTests.cinzel) passedTests++;
                if (fontSizeTest) passedTests++;
                if (lineHeightTest) passedTests++;
                if (fontSmoothingTest) passedTests++;
                if (cssLoadedTest) passedTests++;
                if (cssTests.gradient) passedTests++;
                if (cssTests.shadow) passedTests++;
                if (cssTests.borderRadius) passedTests++;
                if (cssTests.flexbox) passedTests++;

                const passRate = ((passedTests / totalTests) * 100).toFixed(1);
                
                const summary = document.getElementById("test-summary");
                summary.innerHTML = `
                    <div class="alert ${passRate >= 90 ? 'alert-success' : passRate >= 70 ? 'alert-warning' : 'alert-danger'}">
                        <strong>${browser.name} ${browser.version}</strong><br>
                        Tests Passed: ${passedTests} / ${totalTests} (${passRate}%)<br>
                        Status: ${passRate >= 90 ? '✓ All tests passed' : passRate >= 70 ? '⚠ Some issues detected' : '✗ Multiple issues detected'}
                    </div>
                `;

                // Log results to console for debugging
                console.log("Cross-Browser Test Results:", {
                    browser: browser,
                    fonts: fontTests,
                    fontSize: fontSizeTest,
                    lineHeight: lineHeightTest,
                    cssFeatures: cssTests,
                    fontSmoothing: fontSmoothingTest,
                    cssLoaded: cssLoadedTest,
                    passRate: passRate + "%"
                });
            }, 500); // Wait for fonts to load
        }

        // Run tests on page load
        window.addEventListener("load", runAllTests);
    </script>
</body>
</html>
